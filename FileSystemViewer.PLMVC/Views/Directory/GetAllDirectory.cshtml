@model IEnumerable<FileSystemViewer.PLMVC.Models.ExplorerViewModel>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<div class="pathPlace">The computer\@ViewBag.LastPath</div>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastAccessTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Size)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model)
{
    <tr class="item" id="item-@item.Name">
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Type)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastAccessTime)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Size)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
}

</table>
<script>
    $(document).ready(function () {
        $(".item").dblclick(function () {
            var path = $(".pathPlace").text();
            path = path.substr(13, path.length);
            console.log(path);
            debugger;
            var index = this.id.indexOf("-") + 1;
            var newPath = path + this.id.substr(index, this.id.length);
            var url = "/Directory/GetAllDirectory/" + newPath;
            url = encodeURI(url);
            $('.item').unbind();
            $('#main_container').load(url);
        });
    });
</script>